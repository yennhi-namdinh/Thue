<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Li√™n H·ªá ‚Äî Yennhi Shop</title>

<style>
body{
    font-family: Inter, sans-serif;
    background:#f7f7f7;
    margin:0;
    padding:0;
    color:#333;
}
header{
    position: relative;
    background:#7b2fff;
    color:white;
    padding:18px;
    font-size:22px;
    font-weight:600;
    text-align:center;
    box-shadow:0 2px 6px rgba(0,0,0,0.2);
}
.menu-btn{
    position:absolute;
    left:15px;
    top:50%;
    transform:translateY(-50%);
    font-size:30px;
    cursor:pointer;
}
.dropdown-menu{
    position:absolute;
    top:60px;
    left:0;
    width:220px;
    background:white;
    border-radius:0 0 14px 0;
    box-shadow:0 6px 14px rgba(0,0,0,0.15);
    overflow:hidden;
    transform:translateY(-100%);
    transition:0.35s ease;
    opacity:0;
    pointer-events:none;
}
.dropdown-menu.show{
    transform:translateY(0);
    opacity:1;
    pointer-events:auto;
}
.dropdown-menu a{
    display:block;
    padding:14px 20px;
    text-decoration:none;
    font-size:17px;
    font-weight:500;
    color:#333;
    border-bottom:1px solid #eee;
}
.dropdown-menu a:hover{
    background:#f4e4ff;
    color:#7b2fff;
}
.container{
    max-width:900px;
    margin:40px auto;
    padding:20px;
    background:white;
    border-radius:16px;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
}
h2{
    margin-bottom:10px;
    color:#7b2fff;
}
.info-box{
    margin-bottom:25px;
    line-height:1.6;
    font-size:16px;
}
.contact-form input,
.contact-form textarea{
    width:100%;
    padding:14px;
    margin:10px 0;
    margin-left:-15px;
    font-size:16px;
    border:1px solid #ccc;
    border-radius:10px;
}
.contact-form button{
    background:#7b2fff;
    color:white;
    border:none;
    padding:14px 26px;
    font-size:17px;
    border-radius:10px;
    cursor:pointer;
    margin-top:10px;
    font-weight:600;
}
.social{
    margin-top:25px;
}
.social a{
    display:block;
    padding:10px 0;
    font-size:17px;
    text-decoration:none;
    color:#7b2fff;
    font-weight:600;
}
iframe{
    width:100%;
    height:300px;
    border-radius:14px;
    margin-top:20px;
    border:none;
}

/* USER ICON */
.user-box{
    position:absolute;
    left:65px;
    top:50%;
    transform:translateY(-50%);
    display:flex;
    align-items:center;
    gap:6px;
    cursor:pointer;
    background:rgba(255,255,255,0.15);
    padding:4px 10px;
    border-radius:30px;
}
.user-icon{
    width:28px;
    height:28px;
    border-radius:50%;
    background:white;
}
#usernameDisplay{
    font-size:14px;
    font-weight:600;
    color:white;
}
</style>
</head>

<body>

<header>
    <div class="menu-btn" onclick="toggleMenu()">‚ò∞</div>

    <div class="user-box" onclick="window.location.href='profile.html'">
        <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" class="user-icon">
        <span id="usernameDisplay">@guest</span>
    </div>

    Li√™n H·ªá Shop Yennhi
</header>

<div class="dropdown-menu" id="dropdown">
    <a href="index.html">üè† Trang Ch·ªß</a>
    <a href="feadback.html">‚ù§Ô∏è Feedback</a>
    <a href="lienhe.html">üìû Li√™n H·ªá</a>
    <a href="thongbao.html">üîî Th√¥ng b√°o</a>
</div>

<div class="container">

    <h2>üìû Th√¥ng Tin Li√™n H·ªá</h2>
    <div class="info-box">
        <b>ƒê·ªãa ch·ªâ:</b> Nam ƒê·ªãnh, Vi·ªát Nam <br>
        <b>SƒêT:</b> 0123 456 789 <br>
        <b>Gi·ªù l√†m vi·ªác:</b> 8:00 ‚Äì 21:00
    </div>

    <h2>üì¨ G·ª≠i Tin Nh·∫Øn Cho Shop</h2>
    <form class="contact-form" id="contactForm">
        <input type="text" id="nameInput" placeholder="T√™n c·ªßa b·∫°n" required>
        <textarea id="messageInput" rows="4" placeholder="N·ªôi dung mu·ªën g·ª≠i..." required></textarea>
        <button type="submit">G·ª≠i Tin Nh·∫Øn</button>
    </form>

    <div class="social">
        <h2>üåê Li√™n h·ªá nhanh</h2>
        <a href="#">Facebook Shop</a>
        <a href="#">Zalo Shop</a>
        <a href="tel:0123456789">G·ªçi tr·ª±c ti·∫øp</a>
    </div>

    <h2>üìç B·∫£n ƒë·ªì</h2>
    <iframe src="https://www.google.com/maps/embed?..."></iframe>

</div>

<script>
function toggleMenu(){
    document.getElementById("dropdown").classList.toggle("show");
}
document.body.style.zoom="90%";
</script>

<!-- FIREBASE LI√äN H·ªÜ + USERNAME -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBhLH36Hz6TI6gmJJTHP1Dztrbdxi9VGGs",
  authDomain: "shopyennhi-6baae.firebaseapp.com",
  databaseURL: "https://shopyennhi-6baae-default-rtdb.firebaseio.com",
  projectId: "shopyennhi-6baae"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getDatabase(app);
const fs = getFirestore(app);

const usernameBox = document.getElementById("usernameDisplay");
const nameInput   = document.getElementById("nameInput");

let currentUser = null;

// L·∫•y username
onAuthStateChanged(auth, async (user)=>{
    if(!user){
        usernameBox.textContent = "@guest";
        return;
    }
    currentUser = user;

    try{
        const refDoc = doc(fs, "users", user.uid);
        const snap = await getDoc(refDoc);
        if(snap.exists() && snap.data().username){
            const uname = "@"+snap.data().username;
            usernameBox.textContent = uname;
            nameInput.value = uname;
        }else{
            const fallback = user.email.split("@")[0];
            usernameBox.textContent = "@"+fallback;
            nameInput.value = "@"+fallback;
        }
    }catch(e){
        usernameBox.textContent = "@user";
    }
});

// G·ª¨I TIN NH·∫ÆN
document.getElementById("contactForm").addEventListener("submit",(e)=>{
    e.preventDefault();

    const name = nameInput.value.trim();
    const msg  = document.getElementById("messageInput").value.trim();

    if(!name || !msg){
        alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß th√¥ng tin!");
        return;
    }

    push(ref(db,"contactMessages"),{
        name:name,
        message:msg,
        uid: currentUser ? currentUser.uid : null,
        time: new Date().toLocaleString("vi-VN")
    });

    alert("‚úÖ G·ª≠i th√†nh c√¥ng!");
    document.getElementById("contactForm").reset();
});
document.body.style.zoom = "60%";
</script>


</body>
</html>